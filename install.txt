#!/bin/bash
# execute command: bash <(curl -s https://raw.githubusercontent.com/cliqueretire/ubuntu_bash_config/main/install.txt)
# execute command: bash <(wget -O - https://raw.githubusercontent.com/cliqueretire/ubuntu_bash_config/main/install.txt)

read -p "Defina o hostname ex: bobs.0012.cliqueretire: " hostname
sudo hostnamectl set-hostname $hostname

sudo echo "127.0.0.1 $hostname" >> /etc/hosts

echo "Atualizando base de pacotes APT"
sudo apt-get update

echo "atualizando pacotes instalados de sistema"
sudo apt-get -y upgrade

echo "instalando pacotes basicos do sistema"
sudo apt-get -y install vim git curl wget

echo "instalando Ansible"
sudo apt-get -y install ansible

echo "instalando Modulos adicionais do Ansible"
ansible-galaxy collection install community.general

ansible-pull -o -U https://marcioxavierclique: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@github.com/cliqueretire/ansible_playbooks.git -i hosts -t base,ubuntu,install_teamviewer,install_zabbix,install_app

echo "rebooting machine"
sudo reboot
